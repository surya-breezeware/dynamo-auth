import React, { useState, useEffect, useCallback, useMemo } from 'react';
import { Notifications } from '@aws-amplify/notifications';
import InAppMessagingContext from '../InAppMessagingContext/InAppMessagingContext.mjs';

const { InAppMessaging } = Notifications;
function InAppMessagingProvider({ children, }) {
    const [message, setMessage] = useState(null);
    useEffect(() => {
        const listener = InAppMessaging.onMessageReceived((message) => {
            setMessage(message);
        });
        return listener.remove;
    }, []);
    const clearMessage = useCallback(() => {
        setMessage(null);
    }, []);
    const value = useMemo(() => ({
        clearMessage,
        displayMessage: setMessage,
        message,
    }), [clearMessage, message]);
    return (React.createElement(InAppMessagingContext.Provider, { value: value }, children));
}

export { InAppMessagingProvider as default };
